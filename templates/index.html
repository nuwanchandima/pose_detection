<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Face DB</title>
  <style>
    body { font-family: sans-serif; background: #111; color: #eee; }
    h1 { margin-bottom: 0.5rem; }
    .container { max-width: 900px; margin: 0 auto; padding: 1rem; }
    .persons { display: flex; flex-wrap: wrap; gap: 1rem; }
    .card {
      background: #222;
      border-radius: 12px;
      padding: 0.75rem;
      width: 200px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.4);
    }
    .card img {
      max-width: 100%;
      display: block;
      border-radius: 10px;
      margin-bottom: 0.5rem;
    }
    .small { font-size: 0.85rem; color: #aaa; }
    form {
      margin-bottom: 1.5rem;
      padding: 1rem;
      border-radius: 12px;
      background: #1a1a1a;
    }
    input, button {
      margin-top: 0.5rem;
    }
    button {
      padding: 0.5rem 1rem;
      border-radius: 8px;
      border: none;
      background: #3b82f6;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #2563eb;
    }
    .message {
      margin-bottom: 1rem;
      color: #4ade80;
    }
  </style>
</head>
<body>
<div class="container">
  <h1>Face Database</h1>

  {% if message %}
  <div class="message">{{ message }}</div>
  {% endif %}

  <form action="/process_video" method="post" enctype="multipart/form-data">
    <label>Upload video:
      <input type="file" name="video_file" accept="video/*" required>
    </label><br>
    <label>Frame skip:
      <input type="number" name="frame_skip" value="5" min="1">
    </label><br>
    <label>Similarity threshold:
      <input type="number" step="0.01" name="sim_threshold" value="0.5">
    </label><br>
    <button type="submit">Process Video</button>
  </form>

  <h2>Detected Persons ({{ persons | length }})</h2>
  <div class="persons">
    {% for p in persons %}
      <div class="card">
        {% if p.sample_image %}
          <img src="/faces/{{ p.id }}/{{ p.sample_image }}" alt="{{ p.id }}">
        {% else %}
          <div class="small">No image yet</div>
        {% endif %}
        <div><strong>{{ p.id }}</strong></div>
        <div class="small">{{ p.count }} face images</div>
      </div>
    {% endfor %}
  </div>
</div>
</body>
</html>
